max v2;#N vpatcher 49 69 766 531;#P origin -49 0;#P window setfont Monaco 9.;#P comment 357 371 185 262153 Send data from Max to the web:;#N vpatcher 273 429 895 767;#P window setfont Monaco 9.;#P window linecount 4;#P comment 442 33 121 262153 Try the page at http://localhost:8080/jsptest.html;#P window linecount 0;#P message 124 251 100 262153 delete filename;#P window linecount 1;#P newex 292 89 130 262153 prepend set filename;#P newex 261 110 142 262153 prepend set sampleType;#P newex 230 131 142 262153 prepend set lengthMSec;#P newex 199 152 154 262153 prepend set samplingRate;#P newex 168 173 142 262153 prepend set sampleSize;#P window linecount 0;#P newex 137 194 112 262153 prepend set chans;#P newex 155 37 58 262153 loadbang;#P button 137 37 15 0;#P newex 137 66 166 262153 sfinfo~ teenyWeenyTest.wav;#P newex 364 293 76 262153 s REQ_ATTRS;#B color 5;#P window linecount 1;#P hidden newex 341 226 124 262153 bgcolor 150 150 150;#P window linecount 0;#P comment 24 41 100 262153 We use sfinfo~ to pull out a few parameters about a sound file \, and inject them into the web server instance so that JSPs can see them;#P comment 17 228 100 262153 Remove attributes with "delete":;#P comment 432 124 154 262153 Note: you are free to try a "round trip" where output from the request causes input to the JSP for that request - I would not expect it to work reliably!;#P connect 6 0 5 0;#P fasten 7 0 5 0 160 59 142 59;#P connect 5 0 8 0;#P connect 5 1 9 0;#P connect 5 2 10 0;#P connect 5 3 11 0;#P connect 5 4 12 0;#P connect 5 5 13 0;#P connect 10 0 4 0;#P connect 9 0 4 0;#P connect 8 0 4 0;#P connect 13 0 4 0;#P connect 12 0 4 0;#P connect 11 0 4 0;#P connect 14 0 4 0;#P pop;#P newobj 555 369 88 262153 p JSP-Support;#P newex 167 54 76 262153 r REQ_ATTRS;#B color 5;#N vpatcher 345 412 859 692;#P window setfont Monaco 9.;#P window linecount 1;#P hidden newex 41 247 124 262153 bgcolor 150 150 150;#P message 243 227 170 262153 on;#P newex 243 205 76 262153 prepend set;#P message 243 177 170 262153 Destiny;#P newex 243 155 76 262153 prepend set;#P newex 225 41 70 262153 loadmess -;#P message 243 127 170 262153 Goodo;#P newex 243 105 76 262153 prepend set;#P window linecount 0;#P newex 102 72 94 262153 route p1 p2 p3;#P newex 102 33 88 262153 r FORM_PARAMS;#B color 5;#P comment 77 162 121 262153 Try the page at http://localhost:8080/form.html;#P window linecount 3;#P comment 320 31 155 262153 We have provisional support for URL parameters;#P connect 2 0 3 0;#P fasten 6 0 4 0 230 97 248 97;#P connect 3 0 4 0;#P connect 4 0 5 0;#P fasten 6 0 7 0 230 150 248 150;#P connect 3 1 7 0;#P connect 7 0 8 0;#P fasten 6 0 9 0 230 199 248 199;#P connect 3 2 9 0;#P connect 9 0 10 0;#P pop;#P newobj 555 345 118 262153 p ParameterSupport;#P newex 369 189 88 262153 s FORM_PARAMS;#B color 5;#P user umenu 61 113 100 262183 1 64 128 1;#X add stop;#X add start;#P hidden newex 209 395 124 262153 bgcolor 150 150 150;#P comment 337 36 227 262153 Jetty-Based Web Server for Max/MSP;#P comment 337 48 327 262153 Nick Rothwell \, nick@cassiel.com / nick@loadbang.net;#P comment 337 60 253 262153 Download from: http://www.loadbang.net;#P user panel 334 33 335 43;#X brgb 132 132 132;#X frgb 0 0 0;#X border 2;#X rounded 0;#X shadow 0;#X done;#P newex 45 402 82 262153 jit.textfile;#P message 45 348 298 262153 download http://localhost:8080/hello1.txt matrix;#P newex 45 376 58 262153 jit.uldl;#P newex 52 168 70 262153 loadmess -;#P comment 396 270 100 262153 remote address;#P comment 225 270 100 262153 request method;#P message 57 251 170 262153 /form.html;#P newex 57 230 76 262153 prepend set;#P message 228 251 170 262153 POST;#P newex 228 230 76 262153 prepend set;#P message 399 251 170 262153 127.0.0.1;#P newex 399 230 76 262153 prepend set;#P window linecount 2;#P newex 151 150 214 262153 mxj net.loadbang.web.mxj.WebServer @port 8080 @placeholder web-root;#P window linecount 1;#P comment 54 270 100 262153 URI;#P window linecount 3;#P comment 178 99 248 262153 The web server will start as soon as port and place-holder are specified \, but it can be stopped and started explicitly;#P window linecount 2;#P comment 42 312 130 262153 Download a text file using Jitter;#P window linecount 4;#P comment 436 101 232 262153 (Ignore the errors logged to the Max console: this is an artifact of the Jetty logging which we'll fix sometime);#P window linecount 1;#P comment 191 312 288 262153 Or: browse the page at http://localhost:8080/;#P window linecount 3;#P comment 466 163 183 262153 This instance starts a server on the directory containing a file web-root.PLACE_HOLDER;#P window linecount 5;#P comment 35 32 100 262153 Run a web server on a directory in Max's search path;#P user panel 32 29 107 63;#X brgb 206 206 206;#X frgb 0 0 0;#X border 2;#X rounded 0;#X shadow 0;#X done;#P window linecount 1;#P comment 357 348 186 262153 Send data from the web to Max:;#P connect 20 0 19 0;#P connect 19 0 21 0;#P connect 18 0 14 0;#P connect 9 0 14 0;#P connect 14 0 15 0;#P connect 27 1 9 0;#P fasten 30 0 9 0 172 138 156 138;#P connect 18 0 12 0;#P connect 9 1 12 0;#P connect 12 0 13 0;#P connect 9 3 28 0;#P connect 18 0 10 0;#P connect 9 2 10 0;#P connect 10 0 11 0;#P pop;